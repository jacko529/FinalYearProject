# This file is the entry point to configure your own services.
# Files in the packages/ subdirectory configure your dependencies.
neo4j:
    profiling:
        enabled: true
    connections:
        default:
            scheme: bolt # default (must be either "http" or "bolt")
            host: neo4j # default
            port: 7474 # optional, will be set to the proper driver's default port if not provided
            username: neo4j # default
            password: jack # default
        second_connection:
            dsn: 'bolt://neo4j:jack@neo4j:7687'
        third_connection:
            dsn: 'bolt://neo4j:jack@neo4j:7687'
    clients:
        default:
            connections: [default, second_connection, third_connection]
        other_client:
            connections: [second_connection]
        foobar: ~ # foobar client will have the "default" connection
    entity_managers:
        default:
            client: other_client # defaults to "default"
            cache_dir: "%kernel.cache_dir%/neo4j" # defaults to system cache
# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration
parameters:

services:
    # default configuration for services in *this* file
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
    jwt_token_authenticator_neo:
        class: App\Security\Guard\JwtTokenAuthenticatorNEO
        autowire: true
    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/*'
        exclude: '../src/{DependencyInjection,Entity,Migrations,Tests,Kernel.php}'
    App\Classes\:
        # redundant thanks to _defaults, but value is overridable on each service
        resource: '../src/Classes'
        tags: ['classes.service_arguments']
    # controllers are imported separately to make sure services can be injected
    # as action arguments even if you don't extend any base controller class
    App\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']
    GraphAware\Neo4j\Client\ClientInterface: '@neo4j.client.default'
    Graphaware\Neo4j\Client\Client: '@neo4j.client.default'
    GraphAware\Neo4j\OGM\EntityManager: '@neo4j.entity_manager'
    neo4j.entity_manager:
        public: true
        class: GraphAware\Neo4j\OGM\EntityManager
        arguments:
            - '@neo4j.client.default'
            - '%kernel.cache_dir%/neo4j'
    # add more service definitions when explicit configuration is needed
    # please note that last definitions always *replace* previous ones